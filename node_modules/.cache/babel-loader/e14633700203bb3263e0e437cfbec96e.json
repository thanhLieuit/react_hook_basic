{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nconst useFetch = url => {\n  _s();\n  const [data, setdata] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isError, setIsError] = useState(false);\n  useEffect(() => {\n    const ourRequest = axios.CancelToken.source(); // <-- 2nd step\n\n    async function fetchData() {\n      try {\n        let res = await axios.get(url, {\n          cancelToken: ourRequest.token // <-- 2nd step\n        });\n\n        let data = res && res.data ? res.data : [];\n        if (data && data.length > 0) {\n          data.map(item => {\n            item.Date = moment(item.Date).format('DD/MM/YYYY');\n            return item;\n          });\n          data = data.reverse();\n        }\n        setdata(data);\n        setIsLoading(false);\n        setIsError(false);\n      } catch (err) {\n        if (axios.isCancel(err)) {\n          console.log('Previous request canceled, new request is send', err.message);\n        } else {\n          setIsError(true);\n          setIsLoading(false);\n        }\n      }\n    }\n    setTimeout(() => {\n      fetchData();\n    }, 3000);\n    return () => {\n      ourRequest.cancel(); // <-- 3rd step\n    };\n  }, [url]);\n  return {\n    data,\n    isLoading,\n    isError\n  };\n};\n_s(useFetch, \"PLIJZGHnaC2dXF79bWH9SB4uVYk=\");\nexport default useFetch;","map":{"version":3,"names":["useEffect","useState","axios","moment","useFetch","url","data","setdata","isLoading","setIsLoading","isError","setIsError","ourRequest","CancelToken","source","fetchData","res","get","cancelToken","token","length","map","item","Date","format","reverse","err","isCancel","console","log","message","setTimeout","cancel"],"sources":["/Users/tranlieu/Documents/work/study/reacthookbasic/src/customize/fetch.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nconst useFetch = (url) => {\n    const [data, setdata] = useState([]);\n    const [isLoading, setIsLoading] = useState(true);\n    const [isError, setIsError] = useState(false);\n\n    useEffect(() => {\n        const ourRequest = axios.CancelToken.source(); // <-- 2nd step\n\n\n        async function fetchData() {\n            try {\n                let res = await axios.get(url, {\n                    cancelToken: ourRequest.token, // <-- 2nd step\n                });\n                let data = res && res.data ? res.data : [];\n                if (data && data.length > 0) {\n                    data.map(item => {\n                        item.Date = moment(item.Date).format('DD/MM/YYYY')\n                        return item;\n                    })\n                    data = data.reverse();\n                }\n                setdata(data);\n                setIsLoading(false);\n                setIsError(false);\n            } catch (err) {\n                if (axios.isCancel(err)) {\n                    console.log('Previous request canceled, new request is send', err.message);\n                } else {\n                    setIsError(true);\n                    setIsLoading(false);\n                }\n\n            }\n        }\n        setTimeout(() => {\n            fetchData();\n        }, 3000);\n\n\n        return () => {\n            ourRequest.cancel() // <-- 3rd step\n        }\n    }, [url]);\n\n\n    return {\n        data, isLoading, isError\n    }\n}\nexport default useFetch;"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,QAAQ;AAC3B,MAAMC,QAAQ,GAAIC,GAAG,IAAK;EAAA;EACtB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACS,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACZ,MAAMY,UAAU,GAAGV,KAAK,CAACW,WAAW,CAACC,MAAM,EAAE,CAAC,CAAC;;IAG/C,eAAeC,SAAS,GAAG;MACvB,IAAI;QACA,IAAIC,GAAG,GAAG,MAAMd,KAAK,CAACe,GAAG,CAACZ,GAAG,EAAE;UAC3Ba,WAAW,EAAEN,UAAU,CAACO,KAAK,CAAE;QACnC,CAAC,CAAC;;QACF,IAAIb,IAAI,GAAGU,GAAG,IAAIA,GAAG,CAACV,IAAI,GAAGU,GAAG,CAACV,IAAI,GAAG,EAAE;QAC1C,IAAIA,IAAI,IAAIA,IAAI,CAACc,MAAM,GAAG,CAAC,EAAE;UACzBd,IAAI,CAACe,GAAG,CAACC,IAAI,IAAI;YACbA,IAAI,CAACC,IAAI,GAAGpB,MAAM,CAACmB,IAAI,CAACC,IAAI,CAAC,CAACC,MAAM,CAAC,YAAY,CAAC;YAClD,OAAOF,IAAI;UACf,CAAC,CAAC;UACFhB,IAAI,GAAGA,IAAI,CAACmB,OAAO,EAAE;QACzB;QACAlB,OAAO,CAACD,IAAI,CAAC;QACbG,YAAY,CAAC,KAAK,CAAC;QACnBE,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC,OAAOe,GAAG,EAAE;QACV,IAAIxB,KAAK,CAACyB,QAAQ,CAACD,GAAG,CAAC,EAAE;UACrBE,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAEH,GAAG,CAACI,OAAO,CAAC;QAC9E,CAAC,MAAM;UACHnB,UAAU,CAAC,IAAI,CAAC;UAChBF,YAAY,CAAC,KAAK,CAAC;QACvB;MAEJ;IACJ;IACAsB,UAAU,CAAC,MAAM;MACbhB,SAAS,EAAE;IACf,CAAC,EAAE,IAAI,CAAC;IAGR,OAAO,MAAM;MACTH,UAAU,CAACoB,MAAM,EAAE,EAAC;IACxB,CAAC;EACL,CAAC,EAAE,CAAC3B,GAAG,CAAC,CAAC;EAGT,OAAO;IACHC,IAAI;IAAEE,SAAS;IAAEE;EACrB,CAAC;AACL,CAAC;AAAA,GAjDKN,QAAQ;AAkDd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module"}